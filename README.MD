<h2>RabbitMQ</h2>

RabbitMQ — брокер сообщений, который обеспечивает асинхронный обмен 
данными между различными элементами системы. 
Брокер — это посредник, который доставляет данные от продюсера получателю, управляет очередью, 
осуществляет маршрутизацию и хранение данных.
Основанн на протоколе прикладного уровня AMQP. Организованна по принципу FIFO.

Некоторые компоненты брокера RabbitMQ:

- Producer — приложение или процесс, который отправляет сообщения в RabbitMQ.
- Exchange — получает сообщения от производителей и направляет их в очереди на основе правил маршрутизации.
- Queue — место хранения сообщений до тех пор, пока их не заберёт потребитель.
- Consumer — приложение или процесс, который получает сообщения из очереди и обрабатывает их.

Принцип работы Алгоритм работы брокера RabbitMQ:
- Продюсер направляет сообщение в обменник.
- Обменник назначает нужную очередь и отправляет в неё сообщение.
- Получатель подписывается на очередь, чтобы принять сообщение.
- Получатель принимает сообщение и обрабатывает его.
- Получатель отправляет подтверждение о том, что принял сообщение.
- Если получатель не отправил подтверждение о доставке, сообщение возвращается обратно в свою очередь.

Шина данных - это брокер сообщений, который обеспечивает обмен данными (kafka, rabbitmq).

Типы обменников:
- default - к нему по умолчанию привязанны все очереди
- direct - по routing key отправляет данные в очередь
- fanout - во все очередя
- topic - по шаблону #|*
- headers - по routing headers отправляет данные в очередь 
- deadletter

headers:

![img.png](img.png)

ddl:

![img_1.png](img_1.png)

Реализации:

![img_2.png](img_2.png)

Prefetch (также известен как QoS или Quality of Service) — параметр в RabbitMQ, который ограничивает количество 
неподтверждённых сообщений, которые потребитель может получать одновременно. По умолчанию RabbitMQ отправляет 
как можно больше сообщений потребителям, что может привести к перегрузке. 

Принцип работы:

Когда потребитель запрашивает сообщения из очереди, RabbitMQ не просто отправляет одно сообщение за раз, 
а отправляет пакет сообщений до указанного количества prefetch. Затем потребитель обрабатывает эти сообщения 
и подтверждает их по одному (или пакетами). Пока потребитель не подтвердит сообщение, RabbitMQ считает его 
«неподтверждённым» и не будет доставлять новые сообщения этому потребителю, даже если в очереди доступны другие сообщения.
Этот механизм важен для балансировки нагрузки и предотвращения монополизации ресурсов одним потребителем